package task

import (
	"fmt"

	"cve-crawler/model"
)

type (
	Task interface {
		Start()
	}

	Factory func(conf model.WorkerConfig) Task
)

var (
	taskFunc = map[string]Factory{
		"notify": NewNotify,
	}
)

func NewTask(module string, conf model.WorkerConfig) Task {
	fn, ok := taskFunc[module]
	if !ok {
		panic(fmt.Errorf("task <%s> not found", module))
	}
	task := fn(conf)
	// Success
	return task
}
